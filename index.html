<html>
<head>
    <title>CSCI-510: Tessellation</title>
    
    <!-- vertex Shader -->
    <script id="vertex-shader" type="x-shader/x-vertex">
        #version 300 es
        in vec4 aVertexPosition;
        in vec2 aVertexTextureCoords;
        in vec3 bary;
        uniform vec3 theta;
        
        out vec3 vbc;
        out vec2 vTextureCoords;

        void main()
        {
            // Compute the sines and cosines of each rotation
            // about each axis
            vec3 angles = radians( theta );
            vec3 c = cos( angles );
            vec3 s = sin( angles );

            // rotation matrices
            mat4 rx = mat4 ( 1.0,  0.0,  0.0,  0.0,
                             0.0,  c.x,  s.x,  0.0,
                             0.0, -s.x,  c.x,  0.0,
                             0.0,  0.0,  0.0,  2.0 );

            mat4 ry = mat4 ( c.y,  0.0, -s.y,  0.0,
                             0.0,  1.0,  0.0,  0.0,
                             s.y,  0.0,  c.y,  0.0,
                             0.0,  0.0,  0.0,  1.0 );

            mat4 rz = mat4 ( c.z,  s.z,  0.0,  0.0,
                            -s.z,  c.z,  0.0,  0.0,
                             0.0,  0.0,  1.0,  0.0,
                             0.0,  0.0,  0.0,  1.0 );

            gl_Position = rz * ry * rx * aVertexPosition;
            vbc = bary;
            vTextureCoords = aVertexTextureCoords;
        }
    </script>

     <!-- fragment Shader -->
     <script id="fragment-shader" type="x-shader/x-fragment">
         #version 300 es
         precision mediump float;
         uniform sampler2D uSampler;
         
         in vec3 vbc;
         in vec2 vTextureCoords;

         // Color that is the result of this shader
         out vec4 fragColor;

         void main(void) {
             
            fragColor = texture(uSampler, vTextureCoords);
           }

     </script>
     
    <!-- include the shape creation functions -->
    <script type="text/javascript" src="./cgIShape.js"></script>
    
    <!-- include the main tesselation functions -->
    <script type="text/javascript" src="./tessMain.js"></script>
    
    <!-- keyboard functions -->
    <script type="text/javascript">
    
    function gotKey (event) {
        
        var key = event.key;
        
        //  incremental rotation
        if (key == "ArrowUp")
            angles[0] -= angleInc;
        else if (key == "ArrowLeft")
            angles[1] -= angleInc;
        else if (key == 'z')
            angles[2] -= angleInc;
        else if (key == "ArrowDown")
            angles[0] += angleInc;
        else if (key == "ArrowRight")
            angles[1] += angleInc;
        else if (key == 'Z')
            angles[2] += angleInc;

        // reset
        else if (key == 'r' || key=='R') {
            angles[0] = anglesReset[0];
            angles[1] = anglesReset[1];
            angles[2] = anglesReset[2];
        }
        
        // create a new shape and do a redo a draw
        createNewShape();
        draw();
    }
    
    </script>

  <script type="text/javascript">
    // Call init once the webpage has loaded
    window.onload = init;
  </script>
</head>

<body>
  <h1>CSCI-510: Final Project</h1>
  <table>
      <tr>
          <td><canvas id="webgl-canvas" width="500" height="500">
            Your browser does not support the HTML5 canvas element.
          </canvas></td>
          
          <td>
              <h3>Controls</h3>
              
              <table border="1">
              <tbody>
              <tr>
              <td>Up/Down Arrows</td>
              <td>Rotate the scene forward/backwards about the x-axis</td>
              </tr>
              <tr>
              <td>Left/Right Arrows</td>
              <td>Rotate the scene forward/backwards about the y-axis</td>
              </tr>
              <tr>
              <td>z/Z</td>
              <td>Rotate the scene forwards/backwards about the z-axis</td>
              </tr>
              <tr>
              <td>r/R</td>
              <td>Reset the figure to its original orientation</td>
              </tr>
              </tbody>
              </table>
              
          </td>
      </tr>
  </table>
</body>
</html>

